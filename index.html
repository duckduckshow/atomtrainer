<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <title>Atommodelle – Baue Atome und Ionen</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <style>
    :root {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: radial-gradient(circle at top, #1e293b 0, #020617 55%, #000 100%);
      color: #e5e7eb;
    }

    body {
      margin: 0;
      min-height: 100vh;
      display: flex;
      align-items: stretch;
      justify-content: center;
      padding: 1rem;
    }

    * { box-sizing: border-box; }

    .app {
      max-width: 1100px;
      width: 100%;
      background: rgba(15, 23, 42, 0.95);
      border-radius: 1.5rem;
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.5);
      padding: 1.5rem;
      display: grid;
      grid-template-columns: minmax(0,1.2fr) minmax(0,1.4fr);
      gap: 1.5rem;
    }

    @media (max-width: 800px) {
      .app { grid-template-columns: 1fr; }
    }

    h1 { margin: 0 0 0.5rem; font-size: 1.6rem; }

    .subtitle { font-size: 0.9rem; color: #9ca3af; }

    .task-box,
    .control-box,
    .info-box {
      background: rgba(15, 23, 42, 0.95);
      border-radius: 1rem;
      padding: 1rem 1.1rem;
      border: 1px solid rgba(148,163,184,0.25);
    }

    .task-title {
      font-weight: 600;
      margin-bottom: 0.4rem;
      font-size: 1rem;
      color: #f97316;
    }

    .layout-left { display: flex; flex-direction: column; gap: .75rem; }
    .layout-right { display: flex; flex-direction: column; gap: .75rem; }

    /* Atommodell */
    .atom-wrapper {
      display: flex;
      justify-content: center;
      align-items: center;
      padding: .5rem;
    }
    .atom-visual {
      position: relative;
      width: 260px;
      height: 260px;
      border-radius: 50%;
      background: radial-gradient(circle at center, #020617 0, #020617 40%, #020617 100%);
      box-shadow: 0 0 30px rgba(59,130,246,0.4);
    }
    .nucleus {
      position: absolute; left: 50%; top: 50%; transform: translate(-50%,-50%);
      width: 80px; height: 80px; border-radius: 50%;
      background: radial-gradient(circle at top, #f97316 0, #b91c1c 60%, #7f1d1d 100%);
      display: flex; flex-direction: column; justify-content: center; align-items: center;
      color: #fff; border: 2px solid rgba(255,255,255,0.4);
    }
    .electron { position: absolute; width: 10px; height: 10px;
      background: #38bdf8; border-radius: 50%;
      transform: translate(-50%,-50%);
    }
    .shell {
      position: absolute; border-radius: 50%;
      border: 1px dashed rgba(148,163,184,0.6);
    }

    /* --- NEUES VOLLES PERIODENSYSTEM --- */

    .pse-wrapper {
      margin-top: 1rem;
      padding: .5rem;
      background: rgba(15, 23, 42, 0.9);
      border-radius: 0.6rem;
      border: 1px solid rgba(148,163,184,0.4);
    }

    .pse-grid {
      display: grid;
      grid-template-columns: repeat(18, 16px);
      gap: 2px;
      justify-content: center;
    }

    .pse-cell {
      width: 16px;
      height: 16px;
      background: #0f172a;
      border: 1px solid rgba(148,163,184,0.4);
      border-radius: 3px;
    }

    .pse-cell.empty {
      background: transparent;
      border: none;
    }

    .pse-cell.highlight {
      background: #facc15;
      border-color: #fef08a;
      box-shadow: 0 0 4px #facc15;
    }

    /* Buttons etc. */
    button {
      border-radius: 999px;
      border: none;
      padding: 0.4rem 0.75rem;
      background: #1d4ed8;
      color: #fff;
      cursor: pointer;
    }
    button.secondary {
      background: #0f172a;
      border: 1px solid rgba(148,163,184,0.5);
    }
    button.nav {
      background: #22c55e;
      color: #022c22;
    }
  </style>
</head>

<body>
  <div class="app">

    <!-- linke Seite -->
    <div class="layout-left">
      <h1>Atom-Spiel: Baue Atome & Ionen</h1>
      <div class="subtitle">Füge Protonen und Elektronen hinzu oder nimm sie weg.</div>

      <div class="task-box">
        <div class="task-title">Aktuelle Aufgabe</div>
        <div id="taskDescription"></div>
        <div id="levelIndicator"></div>
      </div>

      <div class="control-box">
        <div>Protonen: <span id="protonCount">0</span></div>
        <div>Elektronen: <span id="electronCount">0</span></div>
        <div>Elementname: <span id="elementName">–</span></div>

        <hr>

        <button id="addProton">+ Proton</button>
        <button id="removeProton" class="secondary">– Proton</button>
        <button id="addElectron">+ Elektron</button>
        <button id="removeElectron" class="secondary">– Elektron</button>
        <button id="checkSolutionBtn" class="secondary">Lösung prüfen</button>
        <button id="resetLevel" class="secondary">Zurücksetzen</button>
        <button id="nextLevel" class="nav">Nächste Aufgabe</button>

        <div id="feedback"></div>
      </div>
    </div>

    <!-- rechte Seite -->
    <div class="layout-right">

      <div class="info-box">
        <div class="panel-title">Atommodell</div>

        <div class="atom-wrapper">
          <div id="atomVisual" class="atom-visual">
            <div id="nucleusLabel" class="nucleus">
              <strong>p⁺ = 0</strong>
              e⁻ = 0
            </div>
          </div>
        </div>

        <!-- HIER DAS VOLLE PERIODENSYSTEM -->
        <div class="pse-wrapper">
          <div id="pseGrid" class="pse-grid"></div>
        </div>

      </div>
    </div>

  </div>

<script>
/* ---------- ECHTES PERIODENSYSTEM-LAYOUT (118 Elemente) ---------- */

const PSE_LAYOUT = [
  [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2],
  [3,4,0,0,0,0,0,0,5,6,7,8,9,10,0,0,0,0],
  [11,12,0,0,0,0,0,0,13,14,15,16,17,18,0,0,0,0],
  [19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36],
  [37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54],
  [55,56,0,0,0,0,0,0,0,0,0,0,81,82,83,84,85,86],
  [87,88,0,0,0,0,0,0,0,0,0,0,113,114,115,116,117,118]
];

function buildFullPSE() {
  const grid = document.getElementById("pseGrid");
  grid.innerHTML = "";
  PSE_LAYOUT.flat().forEach(z => {
    const cell = document.createElement("div");
    cell.className = (z === 0 ? "pse-cell empty" : "pse-cell");
    if (z !== 0) cell.dataset.z = z;
    grid.appendChild(cell);
  });
}

function highlightPSE(z) {
  document.querySelectorAll(".pse-cell").forEach(c =>
    c.classList.remove("highlight")
  );
  const el = document.querySelector(`.pse-cell[data-z='${z}']`);
  if (el) el.classList.add("highlight");
}

/* ---------- ELEMENTNAMEN ---------- */

const ELEMENT_NAMES = {
  1:"Wasserstoff (H)",2:"Helium (He)",3:"Lithium (Li)",4:"Beryllium (Be)",5:"Bor (B)",
  6:"Kohlenstoff (C)",7:"Stickstoff (N)",8:"Sauerstoff (O)",9:"Fluor (F)",10:"Neon (Ne)",
  11:"Natrium (Na)",12:"Magnesium (Mg)",13:"Aluminium (Al)",14:"Silicium (Si)",
  15:"Phosphor (P)",16:"Schwefel (S)",17:"Chlor (Cl)",18:"Argon (Ar)",
  19:"Kalium (K)",20:"Calcium (Ca)"
};

/* ---------- AUFGABEN ---------- */

const LEVELS = [
  { description:"Neutrales Helium-Atom", targetProtons:2, targetElectrons:2 },
  { description:"Neutrales Sauerstoff-Atom", targetProtons:8, targetElectrons:8 },
  { description:"Neutrales Natrium-Atom", targetProtons:11, targetElectrons:11 },
  { description:"Natrium-Ion Na⁺", targetProtons:11, targetElectrons:10 },
  { description:"Chlorid-Ion Cl⁻", targetProtons:17, targetElectrons:18 }
];

/* ---------- SPIELZUSTAND ---------- */

let currentLevel = 0;
let protons = 0;
let electrons = 0;

/* ---------- UI UPDATE ---------- */

function updateUI() {
  document.getElementById("protonCount").textContent = protons;
  document.getElementById("electronCount").textContent = electrons;
  document.getElementById("elementName").textContent =
    ELEMENT_NAMES[protons] || "–";

  document.getElementById("nucleusLabel").innerHTML =
    `<strong>p⁺ = ${protons}</strong><br>e⁻ = ${electrons}`;

  highlightPSE(protons);

  renderAtom();
}

function renderAtom() {
  const atom = document.getElementById("atomVisual");
  atom.querySelectorAll(".shell, .electron").forEach(e => e.remove());

  const capacities = [2,8,8];
  let remaining = electrons;
  const radii = [55,90,125];
  const cx = 130, cy = 130;

  for (let i = 0; i < 3; i++) {
    const shell = document.createElement("div");
    shell.className = "shell";
    shell.style.width = 2*radii[i]+"px";
    shell.style.height = 2*radii[i]+"px";
    shell.style.left = (cx - radii[i])+"px";
    shell.style.top = (cy - radii[i])+"px";
    atom.appendChild(shell);

    const n = Math.min(remaining, capacities[i]);
    remaining -= n;

    for (let j = 0; j < n; j++) {
      const e = document.createElement("div");
      e.className = "electron";
      const angle = (2*Math.PI*j) / n;
      e.style.left = (cx + radii[i] * Math.cos(angle))+"px";
      e.style.top  = (cy + radii[i] * Math.sin(angle))+"px";
      atom.appendChild(e);
    }
  }
}

/* ---------- LEVEL STEUERUNG ---------- */

function loadLevel(i) {
  currentLevel = i;
  protons = 0;
  electrons = 0;
  document.getElementById("taskDescription").textContent =
    LEVELS[i].description;
  document.getElementById("levelIndicator").textContent =
    `Aufgabe ${i+1} von ${LEVELS.length}`;
  document.getElementById("feedback").textContent = "";
  updateUI();
}

function checkSolution() {
  const L = LEVELS[currentLevel];
  if (protons === L.targetProtons && electrons === L.targetElectrons) {
    document.getElementById("feedback").textContent = "Richtig!";
  } else {
    document.getElementById("feedback").textContent = "Noch nicht richtig.";
  }
}

/* ---------- BUTTONS ---------- */

document.getElementById("addProton").onclick = () => { protons++; updateUI(); };
document.getElementById("removeProton").onclick = () => { if (protons>0) protons--; updateUI(); };
document.getElementById("addElectron").onclick = () => { electrons++; updateUI(); };
document.getElementById("removeElectron").onclick = () => { if (electrons>0) electrons--; updateUI(); };
document.getElementById("checkSolutionBtn").onclick = checkSolution;
document.getElementById("resetLevel").onclick = () => loadLevel(currentLevel);
document.getElementById("nextLevel").onclick = () => loadLevel((currentLevel+1)%LEVELS.length);

/* ---------- START ---------- */

buildFullPSE();
loadLevel(0);
updateUI();

</script>
</body>
</html>
